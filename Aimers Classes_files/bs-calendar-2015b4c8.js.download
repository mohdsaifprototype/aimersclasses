define("@widget/CALENDAR/bs-calendar-2015b4c8.js",["exports"],(function(e){"use strict";function t(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},a.apply(this,arguments)}var o=5,r=(global.keyMirror||guac.keymirror)({CALENDAR_SECTION_TITLE_RENDERED:null,CALENDAR_SECTION_INTRO_RENDERED:null,CALENDAR_RENDERED:null,CALENDAR_SMALLER_SCREEN_CONTAINER:null,CALENDAR_BIGGER_SCREEN_CONTAINER:null,CALENDAR_EVENT_DAY:null,CALENDAR_EVENT_DATE:null,CALENDAR_EVENT_TIME:null,CALENDAR_EVENT_TITLE:null,CALENDAR_DESC:null,CALENDAR_DESC_BEGINNING:null,CALENDAR_DESC_ELIPSIS:null,CALENDAR_DESC_EXPAND:null,CALENDAR_DESC_TEXT:null,CALENDAR_SHOW_NEXT_EVENTS:null,CALENDAR_SHOW_PREV_EVENTS:null,CALENDAR_EVENT_NAVIGATION:null,CALENDAR_NO_EVENT_MSG:null});class s{constructor(e){this.date="object"==typeof e?e:"string"==typeof e?new Date(e):new Date}static locale(e){s._locale=e}locale(e){this._locale=e}get(e){const t={day:this.date.getDate.bind(this.date),month:this.date.getMonth.bind(this.date),year:this.date.getFullYear.bind(this.date),hour:this.date.getHours.bind(this.date),minute:this.date.getMinutes.bind(this.date),second:this.date.getSeconds.bind(this.date),timeZoneOffset:()=>this._timeZoneOffset};return-1===(global._||guac.lodash).keys(t).indexOf(e)?null:t[e]()}set(e,t){const a={day:this.date.setDate.bind(this.date),month:this.date.setMonth.bind(this.date),year:this.date.setFullYear.bind(this.date),hour:this.date.setHours.bind(this.date),minute:this.date.setMinutes.bind(this.date),second:this.date.setSeconds.bind(this.date),timeZoneOffset:e=>{this._timeZoneOffset=e}};return-1===(global._||guac.lodash).keys(a).indexOf(e)?null:(a[e](t),this)}isSame(e,t){return e.get(t)===this.get(t)}toLocaleString(e,t){const a=t||this._locale||s._locale||"en-US",o={},r=new Date,n=this.date.getTime()+6e4*this.date.getTimezoneOffset()+6e4*(this._timeZoneOffset||0);r.setTime(n);(e&s.WEEKDAY)>0&&(o.weekday="short"),(e&s.YEAR)>0&&(o.year="numeric"),(e&s.MONTH)>0&&(o.month="short"),((e&s.DAY)>0||(e&s.DAY_ORDINAL)>0)&&(o.day="numeric"),(e&s.HOUR)>0&&(o.hour="numeric"),(e&s.MINUTE)>0&&(o.minute="numeric"),(e&s.SECOND)>0&&(o.second="numeric");const l=(()=>{let t="";if((e&s.DAY_ORDINAL)>0&&"en"===a.split("-")[0]){const e=r.toLocaleString(a,{day:"numeric"}),o=/\d+/.exec(e);if(o){const e=parseInt(o[0],10);t="th",-1!==[1,21,31].indexOf(e)&&(t="st"),-1!==[2,22].indexOf(e)&&(t="nd"),-1!==[3,23].indexOf(e)&&(t="rd")}}return t})(),c=r.toLocaleString(a,o),i=/\d+/.exec(c);return l&&i?c.replace(i[0],`${i[0]}${l}`):c}toISOString(){return this.date.toISOString()}}t(s,"WEEKDAY",1),t(s,"YEAR",16),t(s,"MONTH",256),t(s,"DAY",4096),t(s,"HOUR",65536),t(s,"MINUTE",1048576),t(s,"SECOND",16777216),t(s,"DAY_ORDINAL",268435456),t(s,"_locale","");const n=e=>{const t=/[-+]{1}(\d{2}):(\d{2})$/.exec(e);if(t)return(t[0].startsWith("+")?1:-1)*(60*parseInt(t[1],10)+parseInt(t[2],10));return/Z$/.test(e)?0:-1*new Date(e).getTimezoneOffset()},l=s.WEEKDAY,c=s.MONTH,i=s.DAY_ORDINAL,g=s.DAY,p=c|i,u=g|c,d="-",b=["fr-FR","en-AU","en-UK","en-HK","en-IE","en-IL","en-IN","en-MY","en-NZ","en-PK","en-SG","en-ZA"];class h extends(global.React||guac.react).Component{static get propTypes(){return{locale:(global.PropTypes||guac["prop-types"]).string,start:(global.PropTypes||guac["prop-types"]).string.isRequired,end:(global.PropTypes||guac["prop-types"]).string.isRequired,smallScreen:(global.PropTypes||guac["prop-types"]).bool,isManual:(global.PropTypes||guac["prop-types"]).bool.isRequired,order:(global.PropTypes||guac["prop-types"]).number.isRequired,date:(global.PropTypes||guac["prop-types"]).string,timezone:(global.PropTypes||guac["prop-types"]).shape({offset:(global.PropTypes||guac["prop-types"]).number,zone:(global.PropTypes||guac["prop-types"]).string})}}constructor(e){super(e);const{locale:t}=this.props;s.locale(t);const a=new s(this.props.start),o=new s(this.props.end);this.state={start:a,end:o,sameDayEvent:a.isSame(o,"day"),sameMonthEvent:a.isSame(o,"month")}}renderDays(){const{start:e,end:t}=this.state,{locale:a,isManual:o,timezone:s}=this.props;return o?null:(s?(e.set("timeZoneOffset",s.offset),t.set("timeZoneOffset",s.offset)):(e.set("timeZoneOffset",n(this.props.start)),t.set("timeZoneOffset",n(this.props.end))),e.locale(a),t.locale(a),(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.DisplayHeading.Sub,{tag:"div","data-aid":r.CALENDAR_EVENT_DAY},this.state.sameDayEvent?e.toLocaleString(l):`${e.toLocaleString(l)} - ${t.toLocaleString(l)}`))}renderDate(){const{start:e,end:t,sameDayEvent:a,sameMonthEvent:o}=this.state,{smallScreen:r,locale:s,date:n,isManual:l,order:h}=this.props,E=b.includes(s),y=E?e.toLocaleString(u):e.toLocaleString(p),m=E?t.toLocaleString(u):t.toLocaleString(p),R=s.match(/en/)?i:g,T=E?[R,c]:[c,R],C=(global.React||guac.react).createElement("span",null,e.toLocaleString(T[0]),(global.React||guac.react).createElement("br",null),e.toLocaleString(T[1])),w=l?{"data-field-id":"events.date","data-field-route":`/events/${h}`}:{};return l?(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.DisplayHeading,w,n):a?r?(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.DisplayHeading,w,y):(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.DisplayHeading,w,C):o?r?(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.DisplayHeading,w,y+d+t.toLocaleString(i)):(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.DisplayHeading,w,e.toLocaleString(c),(global.React||guac.react).createElement("br",null),e.toLocaleString(i)+d+t.toLocaleString(i)):(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.DisplayHeading,w,y+d,(global.React||guac.react).createElement("br",null),m)}render(){return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,null,this.renderDays(),(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{"data-aid":r.CALENDAR_EVENT_DATE,children:this.renderDate()}))}}const E={display:"inline-block"},y=s.HOUR|s.MINUTE;class m extends(global.React||guac.react).Component{static get propTypes(){return{locale:(global.PropTypes||guac["prop-types"]).string,allDay:(global.PropTypes||guac["prop-types"]).bool,start:(global.PropTypes||guac["prop-types"]).oneOfType([(global.PropTypes||guac["prop-types"]).object,(global.PropTypes||guac["prop-types"]).string]).isRequired,end:(global.PropTypes||guac["prop-types"]).oneOfType([(global.PropTypes||guac["prop-types"]).object,(global.PropTypes||guac["prop-types"]).string]).isRequired,staticContent:(global.PropTypes||guac["prop-types"]).object,isManual:(global.PropTypes||guac["prop-types"]).bool.isRequired,order:(global.PropTypes||guac["prop-types"]).number.isRequired,timezone:(global.PropTypes||guac["prop-types"]).shape({offset:(global.PropTypes||guac["prop-types"]).number,zone:(global.PropTypes||guac["prop-types"]).string})}}getRouteProps(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"start";const{order:t,isManual:a}=this.props;return a?{"data-field-id":`events.${e}`,"data-field-route":`/events/${t}`}:{}}renderTimes(e,t){const{isManual:o}=this.props;if(o&&!e)return null;const r=o?e:(e||"").toLocaleString(y),s=o?t:(t||"").toLocaleString(y),n=r?(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Heading.Minor,a({},this.getRouteProps("start"),{style:E}),r):null,l=s?(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Heading.Minor,a({},this.getRouteProps("end"),{style:E}),s):null,c=e&&t?(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Heading.Minor,{style:{paddingHorizontal:"xsmall",...E}}," ","-"," "):null;return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,null,n,c,l)}render(){const{locale:e,allDay:t,isManual:a,timezone:o,staticContent:l={},order:c}=this.props;let i=this.props.start,g=this.props.end;a||(i=new s(this.props.start),g=new s(this.props.end),o?(i.set("timeZoneOffset",o.offset),g.set("timeZoneOffset",o.offset)):(i.set("timeZoneOffset",n(this.props.start)),g.set("timeZoneOffset",n(this.props.end))),i.locale(e),g.locale(e));const p=t?(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Heading.Minor,{"data-route":a&&`events/${c}`},l.allDay):this.renderTimes(i,g);return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{"data-aid":r.CALENDAR_EVENT_TIME},p)}}const{EDIT:R}=(global.Core||guac["@wsb/guac-widget-core"]).constants.renderModes,T=140,C=/https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s<]{2,}|www\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s<]{2,}|https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9]\.[^\s<]{2,}|www\.[a-zA-Z0-9]\.[^\s<]{2,}/,w=/<br><\/\s*br>|<br\s*\/>|<br>/,f=/[\r\n\u21b5]/,A=/<a[^>]*>[^<]+<\/a>/,P=new RegExp(`(${C.source}|${w.source}|${f.source}|${A.source})`,"g");class D extends(global.React||guac.react).Component{static get propTypes(){return{desc:(global.PropTypes||guac["prop-types"]).string,smallScreen:(global.PropTypes||guac["prop-types"]).bool,eventDetails:(global.PropTypes||guac["prop-types"]).string,isManual:(global.PropTypes||guac["prop-types"]).bool.isRequired,order:(global.PropTypes||guac["prop-types"]).number.isRequired,renderMode:(global.PropTypes||guac["prop-types"]).string}}constructor(e){super(e);const{isManual:t,renderMode:a}=e;this.descBeginning=0,this.descCount=0,this.brCount=0,this.shouldRenderExpandButton=!1,this.onButtonClick=this.onButtonClick.bind(this),this.state={expanded:t&&a===R}}renderAnchor(e,t){const{expanded:a}=this.state,o=(global._||guac.lodash).nth(/>(.*?)<\/a>/.exec(e),1)||"",r=(global._||guac.lodash).nth(/\shref="(.*?)"/.exec(e),1)||"",s=Object.assign({},t,{target:"_blank",href:r?(n=r,0===n.indexOf("http")?n:`http://${n}`):"",children:o});var n;return this.descCount+=o.length,!a&&this.descCount>T?null:(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Link,s)}renderAnchorFromUrl(e,t){const{expanded:a}=this.state,o=Object.assign({},t,{href:0===e.indexOf("http")?e:`http://${e}`,target:"_blank"});return this.descCount+=e.length,!a&&this.descCount>T?null:(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Link,o)}renderBreakpoint(){const{expanded:e}=this.state;return this.brCount++,this.descBeginning++,!e&&this.brCount>3?(this.descCount=141,null):(global.React||guac.react).createElement("br",null)}renderDescElement(e,t){const{expanded:a}=this.state;let o=e;return!a&&this.descCount+e.length>T&&(o=o.substring(0,T-this.descCount)),this.descCount+=e.length,(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Element,t,RegExp(f).test(e)&&(global.React||guac.react).createElement("br",null),o)}getDescElementProps(e,t){const a={children:e};return t===this.descBeginning&&(a["data-aid"]=r.CALENDAR_DESC_BEGINNING),a}formatText(e){const{isManual:t,renderMode:a}=this.props,{expanded:o}=this.state;if(o&&t&&a!==R)return e;const r=e.split(P);this.descBeginning=0,this.descCount=0,this.brCount=0;const s=t?this.formatManualDesc(e):this.formatLinkedDesc(r);return this.descCount>T?(o||t||s.push(this.renderElipsis()),this.shouldRenderExpandButton=!0):this.shouldRenderExpandButton=!1,s}formatLinkedDesc(e){return e.map(((e,t)=>{if(!e)return this.descBeginning++,null;const a=this.getDescElementProps(e,t);return RegExp(A).test(e)?this.renderAnchor(e,a):RegExp(C).test(e)?this.renderAnchorFromUrl(e,a):RegExp(`^${w.source}|${f.source}$`).test(e)?this.renderBreakpoint():this.renderDescElement(e,a)}))}formatManualDesc(e){let t=!0;const a=(global._||guac.lodash).attempt((()=>{try{return JSON.parse(e)}catch(a){return t=!1,[{text:e,type:"unstyled"}]}}),[e]),o=t?a.blocks:a,r=[];for(let e=0;e<o.length;e++){const t=o[e],a=t.text,s=this.descCount;if(this.descCount+=a.length,this.descCount>T){t.text=a.substring(0,T-s)+"...",r.push(t);break}r.push(t)}return t?(a.blocks=r,JSON.stringify(a)):JSON.stringify({blocks:r,entityMap:{}})}renderElipsis(){return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Element,{"data-aid":r.CALENDAR_DESC_ELIPSIS},"...")}renderExpandButton(){const{expanded:e}=this.state;return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.MoreLink.Expand,{tag:"span",expanded:e,"data-aid":r.CALENDAR_DESC_EXPAND,style:{marginTop:"small",userSelect:"none"},onClick:this.onButtonClick},this.props.eventDetails)}onButtonClick(){this.setState({expanded:!this.state.expanded})}render(){const{smallScreen:e,desc:t,isManual:o,order:s}=this.props,{expanded:n}=this.state;if(!t)return null;const l=t.replace(/&nbsp;/g," ").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/<(?!br|\/br|a|\/a\s*\/?)(?!a\s*\/?)[^>]+>/g,""),c=e&&!n,i=o?{"data-field-id":"events.desc","data-field-route":`/events/${s}`}:{};return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{"data-aid":r.CALENDAR_DESC},(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Text,a({richtext:o,"data-aid":r.CALENDAR_DESC_TEXT,style:{marginTop:"small"}},i),!c&&this.formatText(l)),e||this.shouldRenderExpandButton?this.renderExpandButton():null)}}t(D,"defaultProps",{isManual:!1});const{constants:{routes:N}}=(global.Core||guac["@wsb/guac-widget-core"]).Maniless;N.BASE;const{utils:{getRoute:S}}=(global.Core||guac["@wsb/guac-widget-core"]).Maniless;class _ extends(global.React||guac.react).Component{static get propTypes(){return{allDay:(global.PropTypes||guac["prop-types"]).bool,start:(global.PropTypes||guac["prop-types"]).oneOfType([(global.PropTypes||guac["prop-types"]).object,(global.PropTypes||guac["prop-types"]).string]),end:(global.PropTypes||guac["prop-types"]).oneOfType([(global.PropTypes||guac["prop-types"]).object,(global.PropTypes||guac["prop-types"]).string]),date:(global.PropTypes||guac["prop-types"]).string,desc:(global.PropTypes||guac["prop-types"]).string,title:(global.PropTypes||guac["prop-types"]).string,location:(global.PropTypes||guac["prop-types"]).string,staticContent:(global.PropTypes||guac["prop-types"]).object,locale:(global.PropTypes||guac["prop-types"]).string,order:(global.PropTypes||guac["prop-types"]).number,isManual:(global.PropTypes||guac["prop-types"]).bool.isRequired,timezone:(global.PropTypes||guac["prop-types"]).shape({zone:(global.PropTypes||guac["prop-types"]).string,offset:(global.PropTypes||guac["prop-types"]).number}),renderMode:(global.PropTypes||guac["prop-types"]).string,index:(global.PropTypes||guac["prop-types"]).number.isRequired}}renderEventTitle(){const{title:e,isManual:t,order:o}=this.props,s=t?{"data-field-id":"events.title","data-field-route":`/events/${o}`}:{};return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Heading.Minor,a({children:e,"data-aid":r.CALENDAR_EVENT_TITLE},s))}renderEventLocation(){const{isManual:e,location:t,order:o}=this.props,r=e?{"data-field-id":"events.location","data-field-route":`/events/${o}`}:{};return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Text,a({style:{marginTop:"small"},children:t},r))}renderForSmallScreens(){const{desc:e,isManual:t,order:o,staticContent:s={},renderMode:n}=this.props,l=s.eventDetails;return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Component.Grid,{bottom:!1,"data-aid":r.CALENDAR_SMALLER_SCREEN_CONTAINER,style:{marginLeft:0,marginRight:0,"@sm":{display:"none"}}},(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Component.Grid.Cell,{xs:12,style:{paddingLeft:0,marginBottom:"xxsmall"}},(global.React||guac.react).createElement(h,a({smallScreen:!0},this.props))),(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Component.Grid.Cell,{xs:12,style:{paddingRight:0,paddingLeft:0,marginBottom:"xxsmall"}},this.renderEventTitle(),(global.React||guac.react).createElement(m,this.props),this.renderEventLocation(),(global.React||guac.react).createElement(D,{smallScreen:!0,desc:e,eventDetails:l,isManual:t,order:o,renderMode:n})))}renderForLargeScreens(){const{desc:e,isManual:t,order:a,staticContent:o={},renderMode:s}=this.props,n=o.eventDetails;return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Component.Grid,{bottom:!1,"data-aid":r.CALENDAR_BIGGER_SCREEN_CONTAINER,style:{display:"none","@sm":{display:"flex"}}},(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Component.Grid.Cell,{sm:3,style:{paddingLeft:"0px !important"}},(global.React||guac.react).createElement(h,this.props)),(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Component.Grid.Cell,{sm:6,style:{textAlign:"left"}},this.renderEventTitle(),(global.React||guac.react).createElement(D,{desc:e,eventDetails:n,isManual:t,order:a,renderMode:s})),(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Component.Grid.Cell,{sm:3,style:{textAlign:"right",paddingRight:"0px !important"}},(global.React||guac.react).createElement(m,this.props),this.renderEventLocation()))}render(){const{isManual:e,index:t}=this.props,a=e?"events":void 0,o=e?S("/events/$",[t]):void 0;return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Component.Grid,{bottom:!1,style:{width:"100%",borderBottom:"1px solid #bfbfbf",paddingTop:0===this.props.order?"0":"xlarge",paddingBottom:"xlarge",marginLeft:"0 !important"}},(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Component.Grid.Cell,{"data-field-id":a,"data-field-route":o},this.renderForSmallScreens(),this.renderForLargeScreens()))}}class v extends(global.React||guac.react).Component{static get propTypes(){return{id:(global.PropTypes||guac["prop-types"]).string.isRequired,locale:(global.PropTypes||guac["prop-types"]).string,renderMode:(global.PropTypes||guac["prop-types"]).string.isRequired,env:(global.PropTypes||guac["prop-types"]).string.isRequired,category:(global.PropTypes||guac["prop-types"]).string,className:(global.PropTypes||guac["prop-types"]).string,sectionTitle:(global.PropTypes||guac["prop-types"]).string,icalURL:(global.PropTypes||guac["prop-types"]).string,accountId:(global.PropTypes||guac["prop-types"]).string.isRequired,websiteId:(global.PropTypes||guac["prop-types"]).string.isRequired,pageId:(global.PropTypes||guac["prop-types"]).string.isRequired,anchorId:(global.PropTypes||guac["prop-types"]).string,staticContent:(global.PropTypes||guac["prop-types"]).object.isRequired,isManual:(global.PropTypes||guac["prop-types"]).bool.isRequired,visitorMode:(global.PropTypes||guac["prop-types"]).bool}}render(){const{isManual:e,visitorMode:t,staticContent:a={}}=this.props,o=a[t||e?"editNoEvents":"publishNoEvents"];return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Component.Grid,{bottom:!1},(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Component.Grid.Cell,null,(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Heading,{tag:"h4","data-aid":r.CALENDAR_NO_EVENT_MSG,style:{textAlign:"center"}},o)))}}const{renderModes:L}=(global.Core||guac["@wsb/guac-widget-core"]).constants;class M extends(global.React||guac.react).Component{static get propTypes(){return{locale:(global.PropTypes||guac["prop-types"]).string,events:(global.PropTypes||guac["prop-types"]).arrayOf((global.PropTypes||guac["prop-types"]).object).isRequired,smallScreen:(global.PropTypes||guac["prop-types"]).bool,anchorId:(global.PropTypes||guac["prop-types"]).string,id:(global.PropTypes||guac["prop-types"]).string,renderMode:(global.PropTypes||guac["prop-types"]).string,visitorMode:(global.PropTypes||guac["prop-types"]).bool,staticContent:(global.PropTypes||guac["prop-types"]).object,isManual:(global.PropTypes||guac["prop-types"]).bool.isRequired,timezone:(global.PropTypes||guac["prop-types"]).object}}constructor(e){super(e),this.state={offset:0},this.showNextPage=this.showNextPage.bind(this),this.showPrevPage=this.showPrevPage.bind(this),this.scrollToSectionTop=this.scrollToSectionTop.bind(this)}renderEvents(){const{events:e,staticContent:t,locale:r,isManual:s,timezone:n,renderMode:l}=this.props,c=this.state.offset,i=c+o;return e.slice(c,i).map(((e,o)=>(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{key:e.id},(global.React||guac.react).createElement(_,a({staticContent:t,locale:r,order:c+o,isManual:s,timezone:n,renderMode:l,index:o},e)))))}scrollToSectionTop(e){const{id:t,renderMode:a}=this.props;if(L&&a!==L.PUBLISH||!t)return;e.preventDefault();const o=document.querySelector(`[id='${t}']`).offsetTop,r=(e,t,a)=>{if(!(a<=0)){var o=(t-e.scrollTop)/a*10;setTimeout((function(){e.scrollTop=e.scrollTop+o,e.scrollTop!==t&&r(e,t,a-10)}),10)}};r(document.body,o,500)}renderNavigation(){const{events:e,staticContent:t={}}=this.props;if(e.length<=o)return null;const a=t.moreEvents,s=e.length>o&&this.state.offset+o<e.length;return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Component.Grid,{bottom:!1,"data-aid":r.CALENDAR_EVENT_NAVIGATION},(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Component.Grid.Cell,{style:{marginTop:"medium"}},this.renderPrevEventsBtn(a,s),s&&this.renderNextEventsBtn(a)))}renderNextEventsBtn(e){const{id:t}=this.props;return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.MoreLink.Forward,{tag:"span","data-aid":r.CALENDAR_SHOW_NEXT_EVENTS,"data-section-jump":t,onClick:this.showNextPage,style:{userSelect:"none"},children:e})}renderPrevEventsBtn(e,t){if(0===this.state.offset)return null;const{id:a}=this.props;return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.MoreLink.Backward,{tag:"span","data-aid":r.CALENDAR_SHOW_PREV_EVENTS,"data-section-jump":a,onClick:this.showPrevPage,style:{userSelect:"none",paddingRight:t?"small":0},children:e})}showPrevPage(e){this.scrollToSectionTop(e),this.setState({offset:this.state.offset-o})}showNextPage(e){this.scrollToSectionTop(e),this.setState({offset:this.state.offset+o})}renderAnchor(){if(this.props.anchorId)return(global.React||guac.react).createElement("a",{id:this.props.anchorId})}render(){if(this.props.events.length>0){const e="\n        .cal-nav-arrow {\n          opacity: .8;\n          cursor: pointer;\n        }\n        .cal-nav-arrow:hover {\n          opacity: 1;\n        }\n      ";return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,null,(global.React||guac.react).createElement("style",null,e),this.renderAnchor(),(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Component.Grid,{bottom:!1},(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Component.Grid.Cell,null,(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{key:this.state.offset},this.renderEvents()),this.renderNavigation())))}return(global.React||guac.react).createElement(v,this.props)}}var x={local:{calendarDomain:"https://calendar.apps.dev-secureserver.net"},development:{calendarDomain:"https://calendar.apps.dev-secureserver.net"},test:{calendarDomain:"https://calendar.apps.test-secureserver.net"},production:{calendarDomain:"https://calendar.apps.secureserver.net"}};const O={"zh-SG":"zh-CN"},U=e=>e?O[e]||e:"en";function I(e,t,a){return{allDay:!1,title:e.title,start:t.toISOString(),end:a.toISOString(),desc:e.desc,location:e.location}}function X(e,t){let{days:a,hours:o,minutes:r}=t;const n=new s(e.toISOString());return a&&n.set("day",n.get("day")+a),o&&n.set("hour",n.get("hour")+o),r&&n.set("minute",n.get("minute")+r),n}function k(e){const t=e.defaultEvents,a=(new s).set("hour",0).set("minute",0).set("second",0);return[I(t.one,X(a,{hours:18}),X(a,{hours:21})),I(t.two,X(a,{days:2,hours:8,minutes:30}),X(a,{days:2,hours:10,minutes:30})),I(t.three,X(a,{days:4,hours:10}),X(a,{days:4,hours:17})),I(t.four,X(a,{days:5,hours:17}),X(a,{days:5,hours:18})),I(t.one,X(a,{days:7,hours:18}),X(a,{days:7,hours:21})),I(t.two,X(a,{days:9,hours:8,minutes:30}),X(a,{days:9,hours:10,minutes:30}))]}const{postRender:{Actions:B,monitor:G,onWidgetRendered:H}}=(global.Core||guac["@wsb/guac-widget-core"]).utils,$="https://calendar.google.com/calendar/ical/wsb.vnext%40gmail.com/public/basic.ics";class z extends(global.React||guac.react).Component{static get propTypes(){return{env:(global.PropTypes||guac["prop-types"]).string,icalURL:(global.PropTypes||guac["prop-types"]).string,websiteId:(global.PropTypes||guac["prop-types"]).string,pageId:(global.PropTypes||guac["prop-types"]).string,locale:(global.PropTypes||guac["prop-types"]).string,id:(global.PropTypes||guac["prop-types"]).string,anchorId:(global.PropTypes||guac["prop-types"]).string,renderMode:(global.PropTypes||guac["prop-types"]).string,visitorMode:(global.PropTypes||guac["prop-types"]).bool,detachedMode:(global.PropTypes||guac["prop-types"]).bool,staticContent:(global.PropTypes||guac["prop-types"]).object.isRequired,isManual:(global.PropTypes||guac["prop-types"]).bool.isRequired,manualEvents:(global.PropTypes||guac["prop-types"]).arrayOf((global.PropTypes||guac["prop-types"]).object).isRequired,timezone:(global.PropTypes||guac["prop-types"]).object}}constructor(e){super(e),this.regex=new RegExp("(^http(s)*|^webcal)://.+","i"),this.state={linkedEvents:[],loading:!0}}componentDidMount(){const{id:e,isManual:t}=this.props;this._isMounted=!0,t||(G(e,B.SCROLL_TO_URL_FRAGMENT),this.getEvents())}componentDidUpdate(e,t){if(t.loading&&!this.state.loading&&H(this.props.id,B.SCROLL_TO_URL_FRAGMENT),!this.regex.test(this.props.icalURL))return;const a=e.icalURL!==this.props.icalURL,o=e.isManual&&!this.props.isManual;(a||o)&&this.getEvents(this.props.icalURL)}componentWillUnmount(){this._isMounted=!1}fetchEvents(e){const{env:t,websiteId:a,pageId:o,id:r}=this.props;let s=`${(x&&x[t]||{}).calendarDomain}/v1/events/${a}/${o}/${r}`;e&&(s+=`?icalURL=${encodeURIComponent(e)}`,s+=`?t=${Math.floor((new Date).getTime()/3e5)}`);const n=new XMLHttpRequest;n.open("GET",s,!0),n.send(),n.onreadystatechange=()=>{4===n.readyState&&this._isMounted&&this.setState({linkedEvents:200===n.status?JSON.parse(n.responseText).events:[],loading:!1})}}shouldGenerateEventsLocally(e){const{detachedMode:t,icalURL:a,staticContent:o}=this.props;return!!o.defaultEvents&&(t||e===$||!e&&a===$)}getEvents(e){const{staticContent:t}=this.props;this._isMounted&&(this.setState({loading:!0}),this.shouldGenerateEventsLocally(e)?this._isMounted&&this.setState({linkedEvents:k(t),loading:!1}):this.fetchEvents(e))}render(){const{anchorId:e,id:t,visitorMode:a,staticContent:o,locale:r,renderMode:s,isManual:n,timezone:l}=this.props;if(!n&&(this.state.loading||"undefined"==typeof window))return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Component.Grid,{bottom:!1,style:{paddingVertical:"large",minHeight:"100vh"}},(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Component.Grid.Cell,{style:{textAlign:"center"}},(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Loader,{size:"medium"})));const c=n?this.props.manualEvents:this.state.linkedEvents;return(global.React||guac.react).createElement(M,{events:c,anchorId:e,id:t,renderMode:s,visitorMode:a,staticContent:o,locale:U(r),isManual:n,timezone:l})}}e.default=z,Object.defineProperty(e,"__esModule",{value:!0})})),"undefined"!=typeof window&&(window.global=window);
//# sourceMappingURL=bs-calendar-2015b4c8.js.map
